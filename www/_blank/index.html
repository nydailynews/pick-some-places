<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>TITLE</title>
    <link rel="icon" type="image/png" href="http://interactive.nydailynews.com/favicons.png">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="apple-touch-icon" href="">
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <!-- Titles -->
    <meta property="og:title" content='TITLE' />
    <meta name="twitter:title" content='TITLE' />

    <!-- Descriptions -->
    <meta name="description" content="DESC" />
    <meta property="og:description" content="DESC" />
    <meta name="twitter:description" content="DESC" />

    <!-- KEYWORD -->
    <meta name="keywords" content="TAGS" />
    <meta name="news_keywords" content="TAGS" />

    <!-- LINK -->
    <link rel="canonical" href="CANONICAL">
    <meta property="og:url" content="CANONICAL" />
    <meta name="twitter:url" content="CANONICAL" />

    <!-- THUMBNAIL IMAGE-->
    <meta property="og:image" content="CANONICALimg/share.png" />
    <meta name="twitter:image" content="CANONICALimg/share.png" />
    <meta name="twitter:image:alt" content="A description of the twitter image" />
    <meta property="og:image:width" content="1024" />
    <meta property="og:image:height" content="512" />

    <!-- PARSELY -->
    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "NewsArticle",
            "headline": "TITLE",
            "url": "CANONICAL",
            "thumbnailUrl": "CANONICALimg/share.png",
            "dateCreated": "2017-07-12T06:00:00Z",
            "articleSection": "Interactive",
            "creator": ["Reporter Name", "Interactive Project"],
            "keywords": ["interactive project","interactive"]
        }
    </script>

    <!-- NO NEED TO FILL -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:domain" content="http://interactive.nydailynews.com"/>
    <meta name="twitter:site" content="@nydailynews">
    <meta name="twitter:creator" content="@nydailynews">
    <meta name="decorator" content="responsive" />
    <meta name="nydn_section" content="NY Daily News" />
    <meta name="msvalidate.01" content="02916AAC0DA8B068EFE01D721E03ED7E" />
    <meta name="p:domain_verify" content="78efe4f5c9935744af497772f68a0ee7" />
    <meta property="fb:app_id" content="107464888913" />
    <meta property="fb:admins" content="1594068001" />
    <meta property="fb:pages" content="268914272540" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="NY Daily News" />
    <meta property="article:publisher" content="https://www.facebook.com/NYDailyNews/" />
    <meta name="localeCountry" content="US"/>
    <meta name="localeLanguage" content="en" />

    <!-- ADOBE ANALYTICS -->
    <script src="//assets.adobedtm.com/4fc527d6fda921c80e462d11a29deae2e4cf7514/satelliteLib-c91fdc6ac624c6cbcd50250f79786de339793801.js"></script>
    <link rel="stylesheet" type="text/css" href="//www.nydailynews.com/nydn/c/rh.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Open+Sans+Condensed:300,700|PT+Serif" rel="stylesheet">
    <link rel="stylesheet" href="//interactive.nydailynews.com/js/leaflet/0.7.7/leaflet.css">
    <script data-main="//www.nydailynews.com/nydn/js/rh.js?r=20170405001" src="//www.nydailynews.com/nydn/js/require.js?r=2016LIST" defer></script>
      
    <script>
        var nydn = nydn || {
            "section": "NYDailyNews",
            "subsection": "news",
            "template": "article",
            "revision": "201609014009",
            "bidder": { contains: function() {} },
            "targetPath": document.location.pathname
        };
        var nydnDO = [ { 
            'title':'xxxTITLExxx', 
            'link':'CANONICAL', 
            'p_type':'interactive', 
            'section':'interactive' 
        }];
    </script>
    
    <!-- ADS-START -->
    <script onload="nydn_ads('one');" src="/includes/ads/ads.js"></script>
    <!-- ADS-END -->

    <script src="/js/jquery.min.js"></script>

    <script>var nav_params = {section: 'projects', url: 'http://interactive.nydailynews.com/project/'};</script>
    <script src="/library/vendor-nav/vendor-include.js" defer></script>
</head>

<body id="nydailynews" data-section="nydailynews" data-subsection="NY Daily News">

<!-- SITEHEADER-START -->
<header id="templateheader"></header>
<!-- SITEHEADER-END -->

<!-- CONTENT-START -->
<main>
    <article>
		<div>
	<style>
    #quiz-map {
        margin: 10px auto;
        height: 400px;
    }
    </style>
	<section class="intro">
		<h1>QUIZ: TITLE</h1>
		<p>DESCRIPTION</p>
		<div>
			<ul class="ra-share" id="ra-share-top" style="text-align: center;">
				<li class="rt-share-f"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=CANONICAL">facebook</a> </li>
				<li class="ra-share-t"> <a target="_blank" href="https://twitter.com/intent/tweet?text=TWITTER_TEXT&url=CANONICAL&via=NYDNi&related=nydailynews">Tweet</a></li>
				<li class="ra-share-e"> <a href="mailto:?subject=&body=CANONICAL">email</a> </li>
			</ul>
		</div>

		<p class="stamp">Published DATE_LONG</p>
    
	  <div class="ad center">
		<div id='div-gpt-ad-1423507761396-1'>
		  <script>
			googletag.cmd.push(function() { googletag.display('div-gpt-ad-1423507761396-1'); });
		  </script>
		</div>
	  </div>
	</section>

	<section id="map">
		<div id="quiz-map"></div>
	</section>

	<section id="results">
		<p class="latest-news"></p>
	</section>

    <div id='div-gpt-ad-1423507761396-2'>
      <script>
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1423507761396-2'); });
      </script>
    </div>
  </div>

        </div>
    </article>
</main>

<script src="//interactive.nydailynews.com/js/jquery.min.js"></script>
<script src="//interactive.nydailynews.com/js/leaflet/1.2.0/leaflet.js"></script>
<script>
var center_point = [39.5,-98.35];
// THE MAP MANAGER
var m = {
    config: {
        dev: document.location.hash === '#dev' ? 1 : 0,
		json: '../geojson/us-states.json',
    },
    map: L.map('quiz-map', { minZoom: 2, maxZoom: 9, zoomControl:true, scrollWheelZoom:false }).setView(center_point, 3),
    markers: [],
    tile: 'https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
    layer_group: {},
    slugify: function(text) {
        // from https://gist.github.com/mathewbyrne/1280286
        return text.toString().toLowerCase()
            .replace(/\s+/g, '-')           // Replace spaces with -
            .replace(/[^\w\-]+/g, '')       // Remove all non-word chars
            .replace(/\-\-+/g, '-')         // Replace multiple - with single -
            .replace(/^-+/, '')             // Trim - from start of text
            .replace(/-+$/, '');            // Trim - from end of text
    },
	on_event: function(feature, layer) {
            layer.on({
                click: function(e) { console.log('hi'); m.info.update(e, this.feature.properties); },
                //mouseover: function(e) { m.info.update(e, this.feature.properties);                   },
                //mouseout: function(e) { m.info.update(e); }
            });
	},
	layer_options: {
		style: {
			resting: { 
					weight: 3,
					fillOpacity: 0.2,
					color: '#00F',
					fillColor: '#00F'
			},
			active: { 
					weight: 5,
					fillOpacity: 0.2,
					color: '#F00',
					fillColor: '#F00'
			}
		}
	},
    init: function()
    {
        L.tileLayer(this.tile, {
            attribution: this.attribution,
            maxZoom: 16
        }).addTo(this.map);
        $.getJSON(this.config.json, function(data) {
            len = data;
			L.geoJson(data, { 
				onEachFeature: function (feature, layer) { 
					layer.on({
						click: function(e) { console.log('hi'); m.info.update(e, this.feature.properties); }
					});},
				style: m.layer_options.style.resting 
			}).addTo(m.map);
        });

    }
}
m.init();

// THE RESPONSE MANAGER
r = {
	guesses: [],
	correct: [],
    config: {
        dev: document.location.hash === '#dev' ? 1 : 0,
		log_url: '../handler/',
		slug: '',
		answers: [],
    },
	update_config: function (config) {
        // Take an external config object and update this config object.
        for ( var key in config )
        {
            if ( config.hasOwnProperty(key) )
            {
                this.config[key] = config[key];
            }
        }
	},
	to_ordinal: function(n) {
		// From https://gist.github.com/jlbruno/1535691
	   var s = ["th","st","nd","rd"],
		   v = n%100;
	   return n+(s[(v-20)%10]||s[v]||s[0]);
	},
	refresh_ads: function() {
        if ( typeof googletag !== 'undefined' ) googletag.pubads().refresh();
        if ( typeof PARSELY !== 'undefinted' ) PARSELY.beacon.trackPageView({ url: document.location.href, urlref: document.location.href, js: 1 });
	},
    slugify: function (text) {
        // From https://gist.github.com/mathewbyrne/1280286
        return text.toString().toLowerCase()
            .replace(/\s+/g, '-')           // Replace spaces with -
            .replace(/[^\w\-]+/g, '')       // Remove all non-word chars
            .replace(/\-\-+/g, '-')         // Replace multiple - with single -
            .replace(/^-+/, '')             // Trim - from start of text
            .replace(/-+$/, '');            // Trim - from end of text
    },
    tweet_link: function(text) {
        // Given the words to put in a tweet, return markup suitable for a tweet-this link.
        var url = document.location.origin + document.location.pathname;
        return '<span><a href="https://twitter.com/intent/tweet?text=' + text + '&amp;url=' + url + '&amp;via=NYDNi&amp;related=NYDNi,NYDailyNews" target="_blank">Tweet this</a></span>';
    },
    to_percent: function(val) {
        // Turn a float value between 0 and 1.0 into a percent value to one decimal place, 0.0% to 100.0%.
        return Math.round(val*1000)/10;
    }, 
    rando: function()
    {
        var text = "";
        var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

        for ( var i=0; i < 8; i++ )
            text += possible.charAt(Math.floor(Math.random() * possible.length));

        return text;
    },
    log_start: function()
    {
        // Keep track of how many people start a quiz.
        var url = this.config.log_url + '?slug=' + this.config.slug + '&start=1&rando=' + this.rando() + '&callback=';
        var jqxhr = $.getJSON( url, function(data) {} );
    },
	check_answer: function() {
		// Loop through the guesses and compare against the answer(s).
		// If there's a match, add the correct answer to the correct array.
		var l = this.guesses.length;
		for ( var i = 0; i < l; i ++ ) {
			if ( this.config.answers.indexOf(this.guesses[i]) !== -1 ) {
				this.correct.push(this.guesses[i]);
			}
		}
	},
	log_answer: function() {
        var correct = this.correct.length;
        var params = '?slug=' + this.config.slug + '&correct=' + correct + '&rando=' + this.rando() + '&callback=';
        var jqxhr = $.getJSON( this.config.log_url + params, function(data) 
        {
		});
	},
	show_answer: function() {
	},
	init: function() {
        // Config handling. External config objects must be named quiz_config
        if ( typeof quiz_config !== 'undefined' ) this.update_config(quiz_config);
	}
};



function ready(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading"){
        fn();
    } else {
        document.addEventListener('DOMContentLoaded', fn);
    }
}
ready(function(){ r.init(); });
</script>

<!-- CONTENT-END -->

<!-- FOOTER-START -->
<footer id="templatefooter"></footer>
<!-- FOOTER-END -->
<div id="ra-bp">
      </div> <section id="rao">  <div id="rao-close"></div> <div id="rao-wrap"></div> </section>
</div>
<div id="r-scripts">
    <div id="parsely-root" style="display: none">
        <span id="parsely-cfg" data-parsely-site="nydailynews.com"></span>
    </div>
    <div class="r-ad">
        <div id="div-gpt-ad-x100">
        </div>
    </div>
</div>
</body>
</html>
